<html>
	<head>
		<style>
			:root {
				user-select: none;
				background: black;
			}
			body {
				margin: 0;
				width: 100%;
				display: inline-grid;
			}

			.prompt-container {
				margin: 0 8px 8px 8px;
				min-height: 1em;
				background-color: aliceblue;
				opacity: 75%;
				cursor: pointer;
			}
			.prompt-container:first-child {
				margin-top: 8px;
			}
			.prompt-item {
				margin-top: 18px;
				margin-left: 18px;
				margin-right: 18px;
			}
			.prompt-item>p {
				margin-top: 0;
				user-select: text;
			}

			.hidden {
				display: none;
			}
		</style>
		<script type="text/javascript">
			'use strict'
			function onload(){
				const messageFunctions = {
					'Add': message => {
						const id = message.id;
						const data = message.data;
						const promptContainer = document.createElement('div');
						promptContainer.id = id;
						promptContainer.classList.add('prompt-container');
						promptContainer.innerHTML = data;
						promptContainer.addEventListener('click', () => {
							parent.postMessage({type: 'Click', id: id}, '*');
						});
						document.body.prepend(promptContainer);
					},
					'Hide': message => {
						const id = message.id;
						const promptContainer = document.getElementById(id);
						if(promptContainer){
							promptContainer.classList.add('hidden');
						}
					},
					'QueueCounter': message => {
						document.title = 'Queue: '+message;
					}
				}
				window.onmessage = messageEvent => {
					const type = messageEvent.data.type;
					if(messageFunctions[type]){
						messageFunctions[type](messageEvent.data.message);
					}else{
						console.error('Unknown message type', type);
					}
				}
			}
		</script>
	</head>
	<body onload="onload()"></body>
</html>
